{% extends 'tienda/base.html' %}
{% load static %}

{% block titulo %}Citas{% endblock %}

{% block contenedor %}
      <main>
        <section id="scitas">
            <article class="add">
              <div class="tit">
                <h1 class="card-title">Citas</h1>
              </div>
              <div  id="calendar" class="container"></div>
              
              <br>
              <p>Si deseas agendar un servicio, aqui lo podras realizar</p>
                <button class="btn btn-outline-danger btn-lg" data-bs-toggle="modal" data-bs-target="#agg">Agendar cita</button>
            </article>
        </section>
      </main>

     <div class="modal" id="agg">
        <div class="modal-dialog">
            <div class="modal-content">
    
            <!-- Modal Header -->
            <div class="modal-header">
            <h4 class="modal-title">Citas</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
    
            <!-- Modal body -->
            <div class="modal-body">
              <form class="form1" action="{% url 'citaRegistrar' %}" method="post">
                {% csrf_token %}
                <h1 style="text-align: center;">Formulario de cita</h1>
                <div class="form-row">
                  <div class="form-group col-md-12">
                    <label for="inputPassword4">Fecha</label>
                    <input type="date" class="form-control" id="Fecha"  placeholder="Fecha" name ="fechaServicio">
                  </div>
                  <div class="form-group col-md-12">
                    <label for="inputCantidad">Hora</label>
                    <input type="time" class="form-control" id="Hora de servicio" placeholder="Hora" name="hora">
                  </div>
                  <br>
                  <div class="form-group col-md-12">
                    <label for="">Cotizacion</label>
                          <select class="form-control" name="Cotizacion">
                          <option value="">Seleccione</option>
                          {% for c in data1 %}
                              <option value="{{ c.id }}">{{ c.descripcion }}</option>
                          {% endfor %}
                          </select>
                          
                  </div>
                  <br>
                  <div class="form-group col-md-12">
                    <label for="">Empleado</label>
                          <select class="form-control" name="empleado">
                          <option value="">Seleccione</option>
                          {% for e in data2 %}
                              <option value="{{ e.id }}">{{ e.nombre_completo }}</option>
                          {% endfor %}
                          </select>
                  </div>
                  <br>
                  <button type="submit" class="btn btn-primary">Agendar</button>
                </div>
              </form>
            </div>
    
            <!-- Modal footer -->
            <div class="modal-footer">
              
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
    
            </div>
        </div>
     </div>
</main>
<script>
    document.addEventListener('DOMContentLoaded', function(){
       
       var calendarUI = document.getElementById('calendar');
       var calendar = new FullCalendar.Calendar(calendarUI,{
           events:[
           {% for eve in data %}
               {
                   title: "{{ eve.cliente }}",
                   start:"{{ eve.fechaServicio | date:'Y-m-d' }}",
                   
               },
           {% endfor %}
           ]
       });
     
       calendar.render();
       calendar.setOption('locale','es');
   });



</script>



{% endblock %}